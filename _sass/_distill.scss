/*******************************************************************************
 * Style overrides for distill blog posts.
 ******************************************************************************/

d-byline {
  border-top-color: var(--global-divider-color) !important;
}

d-byline h3 {
  color: var(--global-text-color) !important;
}

d-byline a, d-article d-byline a {
  color: var(--global-text-color) !important;
  &:hover {
    color: var(--global-hover-color) !important;
  }
}

// Fixed TOC sidebar
d-contents {
  position: fixed;
  left: 20px;
  top: 100px;
  // Use calc so the TOC fits in the space left of the article.
  // The d-article content area is ~740px centered, so the left gutter is roughly (100vw - 740px) / 2.
  // We leave 20px on the left and 20px gap before the article.
  width: calc((100vw - 740px) / 2 - 40px);
  max-width: 280px;
  min-width: 160px;
  max-height: calc(100vh - 150px);
  overflow-y: auto;
  padding: 1em;
  border-right: 1px solid var(--global-divider-color);
  background: var(--global-bg-color, #fff);
  z-index: 100;
  font-size: 0.85em;

  nav {
    a {
      color: rgba(0, 0, 0, 0.8) !important;
      border-bottom: none !important;
      &:hover {
        color: rgba(0, 0, 0, 1) !important;
        border-bottom: 1px solid var(--global-text-color) !important;
      }
    }
    h3 {
      margin-top: 0;
      margin-bottom: 1em;
    }
    div {
      display: block;
      outline: none;
      margin-bottom: 0.8em;
      color: rgba(0, 0, 0, 0.8);
      font-weight: bold;
    }
    ul {
      padding-left: 1em;
      margin-top: 0;
      margin-bottom: 6px;
      list-style-type: none;
      li {
        margin-bottom: 0.25em;
        a {
          color: rgba(0, 0, 0, 0.5) !important;
          font-weight: normal;
          &:hover {
            color: rgba(0, 0, 0, 0.8) !important;
          }
        }
      }
    }
  }
  .figcaption {
    line-height: 1.4em;
  }
}

// Hide TOC when the left gutter is too narrow to fit it
@media (max-width: 1100px) {
  d-contents {
    display: none;
  }
}

d-article {
  border-top-color: var(--global-divider-color) !important;
  a, p, h1, h2, h3, h4, h5, h6, li, table {
    color: var(--global-text-color) !important;
  }
  a, h1, h2, hr, table, table th, table td {
    border-bottom-color: var(--global-divider-color) !important;
  }
  // Bold underline for hyperlinks
  a {
    text-decoration: none;
    border-bottom: 2px solid var(--global-theme-color, #0066cc) !important;
    padding-bottom: 1px;
  }
  a:hover {
    border-bottom-color: var(--global-hover-color) !important;
  }
  b i {
    display: inline;
  }

  d-footnote {
    scroll-margin-top: 66px;
  }
}

d-appendix {
  border-top-color: var(--global-divider-color) !important;
  color: var(--global-distill-app-color) !important;
  h3, li, span {
    color: var(--global-distill-app-color) !important;
  }
  a, a.footnote-backlink {
    color: var(--global-distill-app-color) !important;
    &:hover {
      color: var(--global-hover-color) !important;
    }
  }
}

